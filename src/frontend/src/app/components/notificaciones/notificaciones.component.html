<div class="container mt-4 mt-md-5">
  <div class="d-flex flex-column flex-md-row justify-content-between align-items-start align-items-md-center mb-4 mb-md-5 gap-3">
    <h2>Notificaciones</h2>
    <div class="d-flex flex-column flex-sm-row gap-2">
      <button 
        class="btn btn-sm btn-outline-primary" 
        (click)="markAllAsRead()"
        [disabled]="unreadCount === 0">
        Marcar todas como leídas
      </button>
      <button class="btn btn-sm btn-outline-secondary" (click)="loadNotifications()">
        Actualizar
      </button>
    </div>
  </div>

  <div class="card">
    <div class="card-body">
      <div *ngIf="loading" class="text-center">
        <div class="spinner-border" role="status"></div>
      </div>

      <div *ngIf="!loading && notifications.length === 0" class="alert alert-info">
        No tienes notificaciones.
      </div>

      <div *ngIf="!loading && notifications.length > 0">
        <div class="list-group">
          <div 
            *ngFor="let notification of notifications" 
            class="list-group-item"
            [class.list-group-item-light]="notification.read"
            [class.list-group-item-primary]="!notification.read">
            <div class="d-flex w-100 justify-content-between align-items-start">
              <div class="flex-grow-1">
                <h6 class="mb-1">
                  <span class="badge me-2" [ngClass]="getTypeBadgeClass(notification.type)">
                    {{ getTypeLabel(notification.type) }}
                  </span>
                  {{ notification.title }}
                </h6>
                <p class="mb-1">{{ notification.message }}</p>
                <small class="text-muted">{{ formatDate(notification.createdDate) }}</small>
              </div>
              <div class="ms-3 d-flex flex-column flex-sm-row gap-2">
                <button 
                  class="btn btn-sm btn-outline-primary" 
                  (click)="markAsRead(notification)"
                  *ngIf="!notification.read">
                  Marcar leída
                </button>
                <button 
                  class="btn btn-sm btn-outline-danger" 
                  (click)="deleteNotification(notification)">
                  Eliminar
                </button>
              </div>
            </div>
          </div>
        </div>

        <div class="mt-4 d-flex flex-column flex-md-row justify-content-between align-items-center gap-3" *ngIf="totalPages > 1">
          <button 
            class="btn btn-outline-secondary" 
            (click)="previousPage()"
            [disabled]="currentPage === 0">
            Anterior
          </button>
          <span class="text-center">Página {{ currentPage + 1 }} de {{ totalPages }}</span>
          <button 
            class="btn btn-outline-secondary" 
            (click)="nextPage()"
            [disabled]="currentPage >= totalPages - 1">
            Siguiente
          </button>
        </div>
      </div>
    </div>
  </div>
</div>





